<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAS C4 - Dashboard</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        // VERIFICACIÓN DE SESIÓN (esto sí déjalo aquí)
        const token = localStorage.getItem('token');
        const user = localStorage.getItem('user');
        
        if (!token || !user) {
            // Si no hay token o usuario, regresa al login
            window.location.href = 'index.html';
        }
    </script>
</head>

<body style="background-color: #f0f2f5;">

    <div id="app-container" style="display: flex; flex-direction: column; min-height: 100vh;">

        <header>
            <div class="container">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div class="logo">
                        <i class="fas fa-shield-alt"></i>
                        <h1>SAS C4 - Bitácora</h1>
                    </div>

                    <nav id="main-nav">
                        <ul>
                            <li><a href="#" id="nav-dashboard"><i class="fas fa-home"></i> Dashboard</a></li>
                            <li><a href="#" id="nav-llamadas"><i class="fas fa-phone-plus"></i> Registrar</a></li>
                            <li><a href="#" id="nav-buscar"><i class="fas fa-search"></i> Buscar</a></li>
                            <li><a href="#" id="nav-c5" style="background: #25D366; color: white; border-radius: 4px; padding: 8px 12px;">
                                <i class="fab fa-whatsapp"></i> Enviar a C5
                            </a></li>

                            <li id="user-info" style="color: #bbdefb; font-weight: bold; margin-left: 10px;">
                                <!-- El app.js llenará esto -->
                            </li>

                            <li><a href="#" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Salir</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </header>

        <main>
            <div class="container">
                <div id="content">
                    <!-- App.js cargará las vistas aquí -->
                    <div style="text-align: center; margin-top: 50px;">
                        <i class="fas fa-circle-notch fa-spin" style="font-size: 3rem; color: #667eea;"></i>
                        <p>Cargando sistema...</p>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <div class="container">
                <p>Sistema de Bitácora de Llamadas SAS C4 &copy; 2024</p>
                <p class="version">Versión 1.0.0</p>
            </div>
        </footer>
    </div>

    <!-- 1. UTILIDADES primero (dependencias básicas) -->
    <script src="js/utils/helpers.js"></script>
    <script src="js/utils/formatters.js"></script>
    <script src="js/utils/notifications.js"></script>
    <script src="js/services/LlamadasService.js"></script>
    <script src="js/services/C5Service.js"></script>
    
    <script src="js/views/DashboardView.js"></script>
    <script src="js/views/LlamadasView.js"></script>
    <script src="js/views/BuscarView.js"></script>
    <script src="js/views/LoginView.js"></script> 
    
    <script src="js/views/c5/C5MainView.js"></script>
    <script src="js/views/c5/C5NewView.js"></script>
    <script src="js/views/c5/C5ListView.js"></script>
    <script src="js/views/c5/C5SuccessView.js"></script>
    <script src="js/views/c5/C5DetailsView.js"></script> 
    <script src="js/views/C5View.js"></script>
    
    <!-- 4. APP.JS ÚLTIMO (depende de todo lo anterior) -->
    <script src="js/app.js"></script>
    
    <!-- app.js ya maneja el logout y user-info -->

</body>
</html>